function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function r(t,e,r,s){Object.defineProperty(t,e,{get:r,set:s,enumerable:!0,configurable:!0})}var s={};!function(t){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function i(t,e){return t(e={exports:{}},e.exports),e.exports}var o=i((function(t,e){var r;Object.defineProperty(e,"__esModule",{value:!0}),(r=e.Orientation||(e.Orientation={})).VerticalReverse="vertical-reverse",r.Horizontal="horizontal",r.HorizontalReverse="horizontal-reverse"}));s(o),o.Orientation;var n=i((function(t,e){function r(t,e){return"boolean"==typeof t?t:e}function s(t,e){return"number"==typeof t?t:e}function i(t,e){return Object.assign({},e.reduce(((e,r)=>Object.assign({},e,{[r]:t[r]})),{}))}function n(t,e){console.log(JSON.stringify(t.map((t=>i(t,e))),null,2))}function a(t){return void 0===t}function h(t={}){return Object.keys(t).reduce(((e,r)=>a(t[r])?e:Object.assign({},e,{[r]:t[r]})),{})}function c(t,e,r){const s=r.style.dot.size,i=t.template.arrow.size,o=s+t.template.arrow.offset,n=Math.PI/7,a=l(t,e,r),h=o*Math.cos(a),c=o*Math.sin(a),m=(o+i)*Math.cos(a-n),p=(o+i)*Math.sin(a-n),u=(o+i/2)*Math.cos(a),d=(o+i/2)*Math.sin(a),g=(o+i)*Math.cos(a+n),f=(o+i)*Math.sin(a+n);return`M${h},${c} L${m},${p} Q${u},${d} ${g},${f} L${g},${f}`}function l(t,e,r){const s=e.x-r.x,i=e.y-r.y,n=t.template.commit.spacing;let a,h;switch(t.orientation){case o.Orientation.Horizontal:a=i,h=-n;break;case o.Orientation.HorizontalReverse:a=i,h=n;break;case o.Orientation.VerticalReverse:a=-n,h=s;break;default:a=n,h=s}return t.isVertical?Math.abs(i)>n&&(h=0):Math.abs(s)>n&&(a=0),t.reverseArrow&&(a*=-1,h*=-1),Math.atan2(a,h)}Object.defineProperty(e,"__esModule",{value:!0}),e.booleanOptionOr=r,e.numberOptionOr=s,e.pick=i,e.debug=n,e.isUndefined=a,e.withoutUndefinedKeys=h,e.arrowSvgPath=c}));s(n),n.booleanOptionOr,n.numberOptionOr,n.pick,n.debug,n.isUndefined,n.withoutUndefinedKeys,n.arrowSvgPath;var a=i((function(t,e){var r,s;Object.defineProperty(e,"__esModule",{value:!0}),(s=r||(r={})).Bezier="bezier",s.Straight="straight",e.MergeStyle=r,e.DEFAULT_FONT="normal 12pt Calibri";class i{constructor(t){t.branch=t.branch||{},t.branch.label=t.branch.label||{},t.arrow=t.arrow||{},t.commit=t.commit||{},t.commit.dot=t.commit.dot||{},t.commit.message=t.commit.message||{},this.colors=t.colors||["#000000"],this.branch={color:t.branch.color,lineWidth:t.branch.lineWidth||2,mergeStyle:t.branch.mergeStyle||r.Bezier,spacing:n.numberOptionOr(t.branch.spacing,20),label:{display:n.booleanOptionOr(t.branch.label.display,!0),color:t.branch.label.color||t.commit.color,strokeColor:t.branch.label.strokeColor||t.commit.color,bgColor:t.branch.label.bgColor||"white",font:t.branch.label.font||t.commit.message.font||e.DEFAULT_FONT,borderRadius:n.numberOptionOr(t.branch.label.borderRadius,10)}},this.arrow={size:t.arrow.size||null,color:t.arrow.color||null,offset:t.arrow.offset||2},this.commit={color:t.commit.color,spacing:n.numberOptionOr(t.commit.spacing,25),hasTooltipInCompactMode:n.booleanOptionOr(t.commit.hasTooltipInCompactMode,!0),dot:{color:t.commit.dot.color||t.commit.color,size:t.commit.dot.size||3,strokeWidth:n.numberOptionOr(t.commit.dot.strokeWidth,0),strokeColor:t.commit.dot.strokeColor,font:t.commit.dot.font||t.commit.message.font||"normal 10pt Calibri"},message:{display:n.booleanOptionOr(t.commit.message.display,!0),displayAuthor:n.booleanOptionOr(t.commit.message.displayAuthor,!0),displayHash:n.booleanOptionOr(t.commit.message.displayHash,!0),color:t.commit.message.color||t.commit.color,font:t.commit.message.font||e.DEFAULT_FONT}},this.tag=t.tag||{}}}e.Template=i;const o=new i({colors:["#6963FF","#47E8D4","#6BDB52","#E84BA5","#FFA657"],branch:{color:"#000000",lineWidth:4,spacing:50,mergeStyle:r.Straight},commit:{spacing:60,dot:{size:16,strokeColor:"#000000",strokeWidth:4},message:{color:"black"}},arrow:{size:16,offset:-1.5}});e.blackArrowTemplate=o;const a=new i({colors:["#979797","#008fb5","#f1c109"],branch:{lineWidth:10,spacing:50},commit:{spacing:80,dot:{size:14},message:{font:"normal 14pt Arial"}}});var h,c;function l(t,e){const r=m(t);return e.branch||(e.branch={}),e.commit||(e.commit={}),{colors:e.colors||r.colors,arrow:Object.assign({},r.arrow,e.arrow),branch:Object.assign({},r.branch,e.branch,{label:Object.assign({},r.branch.label,e.branch.label)}),commit:Object.assign({},r.commit,e.commit,{dot:Object.assign({},r.commit.dot,e.commit.dot),message:Object.assign({},r.commit.message,e.commit.message)}),tag:Object.assign({},r.tag,e.tag)}}function m(t){return t?"string"==typeof t?{[h.BlackArrow]:o,[h.Metro]:a}[t]:t:a}e.metroTemplate=a,(c=h||(h={})).Metro="metro",c.BlackArrow="blackarrow",e.TemplateName=h,e.templateExtend=l,e.getTemplate=m}));s(a),a.MergeStyle,a.DEFAULT_FONT,a.Template,a.blackArrowTemplate,a.metroTemplate,a.TemplateName,a.templateExtend,a.getTemplate;var h=i((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t,e,r,s){this.name=t,this.tagStyle=e,this.commitStyle=s,this.render=r}get style(){return{strokeColor:this.tagStyle.strokeColor||this.commitStyle.color,bgColor:this.tagStyle.bgColor||this.commitStyle.color,color:this.tagStyle.color||"white",font:this.tagStyle.font||this.commitStyle.message.font||a.DEFAULT_FONT,borderRadius:n.numberOptionOr(this.tagStyle.borderRadius,10),pointerWidth:n.numberOptionOr(this.tagStyle.pointerWidth,12)}}}e.Tag=r}));s(h),h.Tag;var c=i((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const r=()=>(Math.random().toString(16).substring(3)+Math.random().toString(16).substring(3)+Math.random().toString(16).substring(3)+Math.random().toString(16).substring(3)).substring(0,40);class s{constructor(t){let e,s;this.refs=[],this.x=0,this.y=0;try{[,e,s]=t.author.match(/(.*) <(.*)>/)}catch(r){[e,s]=[t.author,""]}this.author={name:e,email:s,timestamp:Date.now()},this.committer={name:e,email:s,timestamp:Date.now()},this.subject=t.subject,this.body=t.body||"",this.hash=t.hash||r(),this.hashAbbrev=this.hash.substring(0,7),this.parents=t.parents?t.parents:[],this.parentsAbbrev=this.parents.map((t=>t.substring(0,7))),this.style=Object.assign({},t.style,{message:Object.assign({},t.style.message),dot:Object.assign({},t.style.dot)}),this.dotText=t.dotText,this.onClick=()=>t.onClick?t.onClick(this):void 0,this.onMessageClick=()=>t.onMessageClick?t.onMessageClick(this):void 0,this.onMouseOver=()=>t.onMouseOver?t.onMouseOver(this):void 0,this.onMouseOut=()=>t.onMouseOut?t.onMouseOut(this):void 0,this.renderDot=t.renderDot,this.renderMessage=t.renderMessage,this.renderTooltip=t.renderTooltip}get message(){let t="";return this.style.message.displayHash&&(t+=`${this.hashAbbrev} `),t+=this.subject,this.style.message.displayAuthor&&(t+=` - ${this.author.name} <${this.author.email}>`),t}get branchToDisplay(){return this.branches?this.branches[0]:""}setRefs(t){return this.refs=t.getNames(this.hash),this}setTags(t,e,r){return this.tags=t.getNames(this.hash).map((t=>new h.Tag(t,e(t),r(t),this.style))),this}setBranches(t){return this.branches=t,this}setPosition({x:t,y:e}){return this.x=t,this.y=e,this}withDefaultColor(t){const e=Object.assign({},this.style,{dot:Object.assign({},this.style.dot),message:Object.assign({},this.style.message)});e.color||(e.color=t),e.dot.color||(e.dot.color=t),e.message.color||(e.message.color=t);const r=this.cloneCommit();return r.style=e,r}cloneCommit(){const t=new s({author:`${this.author.name} <${this.author.email}>`,subject:this.subject,style:this.style,body:this.body,hash:this.hash,parents:this.parents,dotText:this.dotText,onClick:this.onClick,onMessageClick:this.onMessageClick,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,renderDot:this.renderDot,renderMessage:this.renderMessage,renderTooltip:this.renderTooltip});return t.refs=this.refs,t.branches=this.branches,t.tags=this.tags,t.x=this.x,t.y=this.y,t}}e.Commit=s}));s(c),c.Commit;var l=i((function(t,e){var s=r&&r.__rest||function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(r[s[i]]=t[s[i]])}return r};Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(t,e,r){this._branch=t,this.name=t.name,this._graph=e,this._onGraphUpdate=r}branch(t){if(this._branch.isDeleted()&&!this._isReferenced())throw new Error(`Cannot branch from the deleted branch "${this.name}"`);const e="string"==typeof t?{name:t}:t;return e.from=this,this._graph.createBranch(e).getUserApi()}commit(t){if(this._branch.isDeleted()&&!this._isReferenced())throw new Error(`Cannot commit on the deleted branch "${this.name}"`);return"string"==typeof t&&(t={subject:t}),t||(t={}),this._commitWithParents(t,[]),this._onGraphUpdate(),this}delete(){if(this._graph.refs.getCommit("HEAD")===this._graph.refs.getCommit(this.name))throw new Error(`Cannot delete the checked out branch "${this.name}"`);return[...function*(t,e){const r=(t,e)=>t.commits.find((({hash:t})=>t===e));let s=r(t,t.refs.getCommit(e.name));for(;s&&s.hash!==e.parentCommitHash;)yield s,s=r(t,s.parents[0])}(this._graph,this._branch)].forEach((t=>{t.refs=t.refs.filter((t=>t!==this.name))})),this._graph.refs.delete(this.name),this._graph.branches.delete(this.name),this._branch=m.createDeletedBranch(this._graph,this._branch.style,(()=>{})),this._onGraphUpdate(),this}merge(...t){if(this._branch.isDeleted()&&!this._isReferenced())throw new Error(`Cannot merge to the deleted branch "${this.name}"`);let e=t[0];o(e)||(e={branch:t[0],fastForward:!1,commitOptions:{subject:t[1]}});const{branch:r,fastForward:s,commitOptions:i}=e,n="string"==typeof r?r:r.name,a=this._graph.refs.getCommit(n);if(!a)throw new Error(`The branch called "${n}" is unknown`);let h=!1;if(s){const t=this._graph.refs.getCommit(this._branch.name);t&&(h=this._areCommitsConnected(t,a))}return s&&h?this._fastForwardTo(a):this._commitWithParents(Object.assign({},i,{subject:i&&i.subject||`Merge branch ${n}`}),[a]),this._onGraphUpdate(),this}tag(t){if(this._branch.isDeleted()&&!this._isReferenced())throw new Error(`Cannot tag on the deleted branch "${this.name}"`);return"string"==typeof t?this._graph.getUserApi().tag({name:t,ref:this._branch.name}):this._graph.getUserApi().tag(Object.assign({},t,{ref:this._branch.name})),this}checkout(){if(this._branch.isDeleted()&&!this._isReferenced())throw new Error(`Cannot checkout the deleted branch "${this.name}"`);const t=this._branch,e=this._graph.refs.getCommit(t.name);return this._graph.currentBranch=t,e&&this._graph.refs.set("HEAD",e),this}_commitWithParents(t,e){const r=this._graph.refs.getCommit(this._branch.name);r?e.unshift(r):this._branch.parentCommitHash&&e.unshift(this._branch.parentCommitHash);const{tag:i}=t,o=s(t,["tag"]),n=new c.Commit(Object.assign({hash:this._graph.generateCommitHash(),author:this._branch.commitDefaultOptions.author||this._graph.author,subject:this._branch.commitDefaultOptions.subject||this._graph.commitMessage},o,{parents:e,style:this._getCommitStyle(t.style)}));r?this._graph.refs.getNames(r).forEach((t=>this._graph.refs.set(t,n.hash))):this._graph.refs.set(this._branch.name,n.hash),this._graph.commits.push(n),this.checkout(),i&&this.tag(i)}_areCommitsConnected(t,e){const r=this._graph.commits.find((({hash:t})=>e===t));return!!r&&(!(0===r.parents.length)&&(!!r.parents.includes(t)||r.parents.some((e=>this._areCommitsConnected(t,e)))))}_fastForwardTo(t){this._graph.refs.set(this._branch.name,t)}_getCommitStyle(t={}){return Object.assign({},n.withoutUndefinedKeys(this._graph.template.commit),n.withoutUndefinedKeys(this._branch.commitDefaultOptions.style),t,{message:Object.assign({},n.withoutUndefinedKeys(this._graph.template.commit.message),n.withoutUndefinedKeys(this._branch.commitDefaultOptions.style.message),t.message,n.withoutUndefinedKeys({display:this._graph.shouldDisplayCommitMessage&&void 0})),dot:Object.assign({},n.withoutUndefinedKeys(this._graph.template.commit.dot),n.withoutUndefinedKeys(this._branch.commitDefaultOptions.style.dot),t.dot)})}_isReferenced(){return this._graph.branches.has(this.name)||this._graph.refs.hasName(this.name)||this._graph.commits.reduce(((t,{refs:e})=>[...t,...e]),[]).includes(this.name)}}function o(t){return"object"==typeof t&&!(t instanceof i)}e.BranchUserApi=i}));s(l),l.BranchUserApi;var m=i((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const r="";e.DELETED_BRANCH_NAME=r;class s{constructor(t){this.gitgraph=t.gitgraph,this.name=t.name,this.style=t.style,this.parentCommitHash=t.parentCommitHash,this.commitDefaultOptions=t.commitDefaultOptions||{style:{}},this.onGraphUpdate=t.onGraphUpdate,this.renderLabel=t.renderLabel}getUserApi(){return new l.BranchUserApi(this,this.gitgraph,this.onGraphUpdate)}isDeleted(){return this.name===r}}function i(t,e,i){return new s({name:r,gitgraph:t,style:e,onGraphUpdate:i})}e.Branch=s,e.createDeletedBranch=i}));s(m),m.DELETED_BRANCH_NAME,m.Branch,m.createDeletedBranch;var p=i((function(t,e){var r;Object.defineProperty(e,"__esModule",{value:!0}),(r||(r={})).Compact="compact",e.Mode=r}));s(p),p.Mode;var u=i((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t){this.rows=new Map,this.maxRowCache=void 0,this.computeRowsFromCommits(t)}getRowOf(t){return this.rows.get(t)||0}getMaxRow(){return void 0===this.maxRowCache&&(this.maxRowCache=s(Array.from(this.rows.values())).length-1),this.maxRowCache}computeRowsFromCommits(t){t.forEach(((t,e)=>{this.rows.set(t.hash,e)})),this.maxRowCache=void 0}}function s(t){const e=new Set;return t.forEach((t=>e.add(t))),Array.from(e)}e.RegularGraphRows=r}));s(u),u.RegularGraphRows;var d=i((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});class r extends u.RegularGraphRows{computeRowsFromCommits(t){t.forEach(((e,r)=>{let s=r;if(0!==r){const i=this.getRowOf(e.parents[0]),o=t[r-1];s=Math.max(i+1,this.getRowOf(o.hash)),e.parents.length>1&&i<this.getRowOf(e.parents[1])&&s++}this.rows.set(e.hash,s)}))}}e.CompactGraphRows=r}));s(d),d.CompactGraphRows;var g=i((function(t,e){function r(t,e){return t===p.Mode.Compact?new d.CompactGraphRows(e):new u.RegularGraphRows(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.GraphRows=u.RegularGraphRows,e.createGraphRows=r}));s(g),g.GraphRows,g.createGraphRows;var f=i((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t,e,r){this.branches=new Set,this.colors=e,t.forEach((t=>this.branches.add(t.branchToDisplay))),r&&(this.branches=new Set(Array.from(this.branches).sort(r)))}get(t){return Array.from(this.branches).findIndex((e=>e===t))}getColorOf(t){return this.colors[this.get(t)%this.colors.length]}}e.BranchesOrder=r}));s(f),f.BranchesOrder;var b=i((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(){this.commitPerName=new Map,this.namesPerCommit=new Map}set(t,e){const r=this.commitPerName.get(t);return r&&this.removeNameFrom(r,t),this.addNameTo(e,t),this.addCommitTo(t,e),this}delete(t){return this.hasName(t)&&(this.removeNameFrom(this.getCommit(t),t),this.commitPerName.delete(t)),this}getCommit(t){return this.commitPerName.get(t)}getNames(t){return this.namesPerCommit.get(t)||[]}getAllNames(){return Array.from(this.commitPerName.keys())}hasCommit(t){return this.namesPerCommit.has(t)}hasName(t){return this.commitPerName.has(t)}removeNameFrom(t,e){const r=this.namesPerCommit.get(t)||[];this.namesPerCommit.set(t,r.filter((t=>t!==e)))}addNameTo(t,e){const r=this.namesPerCommit.get(t)||[];this.namesPerCommit.set(t,[...r,e])}addCommitTo(t,e){this.commitPerName.set(t,e)}}e.Refs=r}));s(b),b.Refs;var y=i((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t,e,r,s,i,o){this.branchesPaths=new Map,this.commits=t,this.branches=e,this.commitSpacing=r,this.isGraphVertical=s,this.isGraphReverse=i,this.createDeletedBranch=o}execute(){return this.fromCommits(),this.withMergeCommits(),this.smoothBranchesPaths()}fromCommits(){this.commits.forEach((t=>{let e=this.branches.get(t.branchToDisplay);e||(e=this.getDeletedBranchInPath()||this.createDeletedBranch());const r=[],s=this.branchesPaths.get(e),i=this.commits.find((({hash:e})=>e===t.parents[0]));s?r.push(...s):i&&r.push({x:i.x,y:i.y}),r.push({x:t.x,y:t.y}),this.branchesPaths.set(e,r)}))}withMergeCommits(){this.commits.filter((({parents:t})=>t.length>1)).forEach((t=>{const e=this.commits.find((({hash:e})=>e===t.parents[1]));if(!e)return;const r=e.branches?e.branches[0]:"";let s=this.branches.get(r);if(!s&&(s=this.getDeletedBranchInPath(),!s))return;const i=[...this.branchesPaths.get(s)||[]];this.branchesPaths.set(s,[...i,{x:t.x,y:t.y,mergeCommit:!0}])}))}getDeletedBranchInPath(){return Array.from(this.branchesPaths.keys()).find((t=>t.isDeleted()))}smoothBranchesPaths(){const t=new Map;return this.branchesPaths.forEach(((e,r)=>{if(e.length<=1)return void t.set(r,[e]);e=this.isGraphVertical?e.sort(((t,e)=>t.y>e.y?-1:1)):e.sort(((t,e)=>t.x>e.x?1:-1)),this.isGraphReverse&&(e=e.reverse());const s=e.reduce(((t,r,s)=>{if(r.mergeCommit){t[t.length-1].push(n.pick(r,["x","y"]));let i=s-1,o=e[i];for(;i>=0&&o.mergeCommit;)i--,o=e[i];i>=0&&t.push([o])}else t[t.length-1].push(r);return t}),[[]]);this.isGraphReverse&&s.forEach((t=>t.reverse())),this.isGraphVertical?s.forEach((e=>{if(e.length<=1)return;const s=e[0],i=e[e.length-1],o=e[1].x,n=Math.round(Math.abs(s.y-i.y)/this.commitSpacing)-1,a=n>0?new Array(n).fill(0).map(((t,r)=>({x:o,y:e[0].y-this.commitSpacing*(r+1)}))):[],h=t.get(r)||[];t.set(r,[...h,[s,...a,i]])})):s.forEach((e=>{if(e.length<=1)return;const s=e[0],i=e[e.length-1],o=e[1].y,n=Math.round(Math.abs(s.x-i.x)/this.commitSpacing)-1,a=n>0?new Array(n).fill(0).map(((t,r)=>({y:o,x:e[0].x+this.commitSpacing*(r+1)}))):[],h=t.get(r)||[];t.set(r,[...h,[s,...a,i]])}))})),t}}function s(t,e,r){return t.map((t=>"M"+t.map((({x:t,y:s},i,o)=>{if(e&&o.length>1&&(1===i||i===o.length-1)){const e=o[i-1];if(r){const r=(e.y+s)/2;return`C ${e.x} ${r} ${t} ${r} ${t} ${s}`}{const r=(e.x+t)/2;return`C ${r} ${e.y} ${r} ${s} ${t} ${s}`}}return`L ${t} ${s}`})).join(" ").slice(1))).join(" ")}e.BranchesPathsCalculator=r,e.toSvgPath=s}));s(y),y.BranchesPathsCalculator,y.toSvgPath;var v=i((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t,e){this._graph=t,this._onGraphUpdate=e}clear(){return this._graph.refs=new b.Refs,this._graph.tags=new b.Refs,this._graph.commits=[],this._graph.branches=new Map,this._graph.currentBranch=this._graph.createBranch("master"),this._onGraphUpdate(),this}commit(t){return this._graph.currentBranch.getUserApi().commit(t),this}branch(t){return this._graph.createBranch(t).getUserApi()}tag(...t){let e,r,s,i,o;if("string"==typeof t[0]?(e=t[0],r=t[1]):(e=t[0].name,r=t[0].ref,s=t[0].style,i=t[0].render),!r){const t=this._graph.refs.getCommit("HEAD");if(!t)return this;r=t}if(this._graph.refs.hasCommit(r)&&(o=r),this._graph.refs.hasName(r)&&(o=this._graph.refs.getCommit(r)),!o)throw new Error(`The ref "${r}" does not exist`);return this._graph.tags.set(e,o),this._graph.tagStyles[e]=s,this._graph.tagRenders[e]=i,this._onGraphUpdate(),this}import(t){const e=new Error("Only `git2json` format is supported for imported data.");if(!Array.isArray(t))throw e;if(!t.every((t=>"object"==typeof t&&"object"==typeof t.author&&Array.isArray(t.refs))))throw e;const r=t.map((t=>Object.assign({},t,{style:Object.assign({},this._graph.template.commit,{message:Object.assign({},this._graph.template.commit.message,{display:this._graph.shouldDisplayCommitMessage})}),author:`${t.author.name} <${t.author.email}>`}))).reverse();this.clear(),this._graph.commits=r.map((t=>new c.Commit(t))),r.forEach((({refs:t,hash:e})=>{if(!t)return;if(!e)return;const r="tag: ";t.map((t=>t.split(r))).map((([t,e])=>e)).filter((t=>"string"==typeof t)).forEach((t=>this._graph.tags.set(t,e))),t.filter((t=>!t.startsWith(r))).forEach((t=>this._graph.refs.set(t,e)))}));const s=this._getBranches();return this._graph.commits.map((t=>this._withBranches(s,t))).reduce(((t,e)=>e.branches?(e.branches.forEach((e=>t.add(e))),t):t),new Set).forEach((t=>this.branch(t))),this._onGraphUpdate(),this}_withBranches(t,e){let r=Array.from((t.get(e.hash)||new Set).values());return 0===r.length&&(r=[m.DELETED_BRANCH_NAME]),e.setBranches(r)}_getBranches(){const t=new Map,e=[];return this._graph.refs.getAllNames().filter((t=>"HEAD"!==t)).forEach((r=>{const s=this._graph.refs.getCommit(r);for(s&&e.push(s);e.length>0;){const s=e.pop(),i=this._graph.commits.find((({hash:t})=>t===s)),o=t.get(s)||new Set;o.add(r),t.set(s,o),i&&i.parents&&i.parents.length>0&&e.push(i.parents[0])}})),t}}e.GitgraphUserApi=r}));s(v),v.GitgraphUserApi;var w=i((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t={}){this.refs=new b.Refs,this.tags=new b.Refs,this.tagStyles={},this.tagRenders={},this.commits=[],this.branches=new Map,this.listeners=[],this.nextTimeoutId=null,this.template=a.getTemplate(t.template),this.currentBranch=this.createBranch("master"),this.orientation=t.orientation,this.reverseArrow=n.booleanOptionOr(t.reverseArrow,!1),this.initCommitOffsetX=n.numberOptionOr(t.initCommitOffsetX,0),this.initCommitOffsetY=n.numberOptionOr(t.initCommitOffsetY,0),this.mode=t.mode,this.author=t.author||"Sergio Flores <saxo-guy@epic.com>",this.commitMessage=t.commitMessage||"He doesn't like George Michael! Boooo!",this.generateCommitHash="function"==typeof t.generateCommitHash?t.generateCommitHash:()=>{},this.branchesOrderFunction="function"==typeof t.compareBranchesOrder?t.compareBranchesOrder:void 0,this.branchLabelOnEveryCommit=n.booleanOptionOr(t.branchLabelOnEveryCommit,!1)}get isHorizontal(){return this.orientation===o.Orientation.Horizontal||this.orientation===o.Orientation.HorizontalReverse}get isVertical(){return!this.isHorizontal}get isReverse(){return this.orientation===o.Orientation.HorizontalReverse||this.orientation===o.Orientation.VerticalReverse}get shouldDisplayCommitMessage(){return!this.isHorizontal&&this.mode!==p.Mode.Compact}getUserApi(){return new v.GitgraphUserApi(this,(()=>this.next()))}subscribe(t){this.listeners.push(t);let e=!0;return()=>{if(!e)return;e=!1;const r=this.listeners.indexOf(t);this.listeners.splice(r,1)}}getRenderedData(){const t=this.computeRenderedCommits(),e=this.computeRenderedBranchesPaths(t),r=this.computeCommitMessagesX(e);return this.computeBranchesColor(t,e),{commits:t,branchesPaths:e,commitMessagesX:r}}createBranch(t){const e="HEAD";let r={gitgraph:this,name:"",parentCommitHash:this.refs.getCommit(e),style:this.template.branch,onGraphUpdate:()=>this.next()};if("string"==typeof t)r.name=t,r.parentCommitHash=this.refs.getCommit(e);else{const s=t.from?t.from.name:e,i=this.refs.getCommit(s)||(this.refs.hasCommit(t.from)?t.from:void 0);t.style=t.style||{},r=Object.assign({},r,t,{parentCommitHash:i,style:Object.assign({},r.style,t.style,{label:Object.assign({},r.style.label,t.style.label)})})}const s=new m.Branch(r);return this.branches.set(s.name,s),s}computeRenderedCommits(){const t=this.getBranches(),e=(()=>{const e=new Set(this.commits.reduce(((e,{hash:r})=>t.has(r)?e:[...e,r]),[])),r=this.commits.reduce(((t,e)=>e.parents.length>1?[...t,...e.parents.slice(1).map((t=>this.commits.find((({hash:e})=>t===e))))]:t),[]),s=new Set;return r.forEach((t=>{let r=t;for(;r&&e.has(r.hash);)s.add(r.hash),r=r.parents.length>0?this.commits.find((({hash:t})=>r.parents[0]===t)):void 0})),s})(),r=this.commits.filter((({hash:r})=>t.has(r)||e.has(r))),s=r.map((e=>this.withBranches(t,e))),i=g.createGraphRows(this.mode,r),o=new f.BranchesOrder(s,this.template.colors,this.branchesOrderFunction);return s.map((t=>t.setRefs(this.refs))).map((t=>this.withPosition(i,o,t))).map((t=>t.withDefaultColor(this.getBranchDefaultColor(o,t.branchToDisplay)))).map((t=>t.setTags(this.tags,(t=>Object.assign({},this.tagStyles[t],this.template.tag)),(t=>this.tagRenders[t]))))}computeRenderedBranchesPaths(t){return new y.BranchesPathsCalculator(t,this.branches,this.template.commit.spacing,this.isVertical,this.isReverse,(()=>m.createDeletedBranch(this,this.template.branch,(()=>this.next())))).execute()}computeBranchesColor(t,e){const r=new f.BranchesOrder(t,this.template.colors,this.branchesOrderFunction);Array.from(e).forEach((([t])=>{t.computedColor=t.style.color||this.getBranchDefaultColor(r,t.name)}))}computeCommitMessagesX(t){return Array.from(t).length*this.template.branch.spacing}withBranches(t,e){let r=Array.from((t.get(e.hash)||new Set).values());return 0===r.length&&(r=[m.DELETED_BRANCH_NAME]),e.setBranches(r)}getBranches(){const t=new Map,e=[];return this.refs.getAllNames().filter((t=>"HEAD"!==t)).forEach((r=>{const s=this.refs.getCommit(r);for(s&&e.push(s);e.length>0;){const s=e.pop(),i=this.commits.find((({hash:t})=>t===s)),o=t.get(s)||new Set;o.add(r),t.set(s,o),i&&i.parents&&i.parents.length>0&&e.push(i.parents[0])}})),t}withPosition(t,e,r){const s=t.getRowOf(r.hash),i=t.getMaxRow(),n=e.get(r.branchToDisplay);switch(this.orientation){default:return r.setPosition({x:this.initCommitOffsetX+this.template.branch.spacing*n,y:this.initCommitOffsetY+this.template.commit.spacing*(i-s)});case o.Orientation.VerticalReverse:return r.setPosition({x:this.initCommitOffsetX+this.template.branch.spacing*n,y:this.initCommitOffsetY+this.template.commit.spacing*s});case o.Orientation.Horizontal:return r.setPosition({x:this.initCommitOffsetX+this.template.commit.spacing*s,y:this.initCommitOffsetY+this.template.branch.spacing*n});case o.Orientation.HorizontalReverse:return r.setPosition({x:this.initCommitOffsetX+this.template.commit.spacing*(i-s),y:this.initCommitOffsetY+this.template.branch.spacing*n})}}getBranchDefaultColor(t,e){return t.getColorOf(e)}next(){this.nextTimeoutId&&window.clearTimeout(this.nextTimeoutId),this.nextTimeoutId=window.setTimeout((()=>{this.listeners.forEach((t=>t(this.getRenderedData())))}),0)}}e.GitgraphCore=r}));s(w),w.GitgraphCore;var O=i((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.GitgraphCore=w.GitgraphCore,e.Mode=p.Mode,e.GitgraphUserApi=v.GitgraphUserApi,e.BranchUserApi=l.BranchUserApi,e.Branch=m.Branch,e.Commit=c.Commit,e.Tag=h.Tag,e.Refs=b.Refs,e.MergeStyle=a.MergeStyle,e.TemplateName=a.TemplateName,e.templateExtend=a.templateExtend,e.Orientation=o.Orientation,e.toSvgPath=y.toSvgPath,e.arrowSvgPath=n.arrowSvgPath}));s(O);var x=O.GitgraphCore,C=O.Mode,M=(O.GitgraphUserApi,O.BranchUserApi,O.Branch,O.Commit,O.Tag,O.Refs,O.MergeStyle),A=O.TemplateName,S=O.templateExtend,_=O.Orientation,E=O.toSvgPath,k=O.arrowSvgPath,D="http://www.w3.org/2000/svg";function P(t){var e=document.createElementNS(D,"svg");return t?(t.children&&t.children.forEach((function(t){return e.appendChild(t)})),t.viewBox&&e.setAttribute("viewBox",t.viewBox),t.height&&e.setAttribute("height",t.height.toString()),t.width&&e.setAttribute("width",t.width.toString()),e):e}function j(t){var e=document.createElementNS(D,"g");return t.children.forEach((function(t){return t&&e.appendChild(t)})),t.translate&&e.setAttribute("transform","translate("+t.translate.x+", "+t.translate.y+")"),t.fill&&e.setAttribute("fill",t.fill),t.stroke&&e.setAttribute("stroke",t.stroke),t.strokeWidth&&e.setAttribute("stroke-width",t.strokeWidth.toString()),t.onClick&&e.addEventListener("click",t.onClick),t.onMouseOver&&e.addEventListener("mouseover",t.onMouseOver),t.onMouseOut&&e.addEventListener("mouseout",t.onMouseOut),e}function R(t){var e=document.createElementNS(D,"text");return e.setAttribute("alignment-baseline","central"),e.setAttribute("dominant-baseline","central"),e.textContent=t.content,t.fill&&e.setAttribute("fill",t.fill),t.font&&e.setAttribute("style","font: "+t.font),t.anchor&&e.setAttribute("text-anchor",t.anchor),t.translate&&(e.setAttribute("x",t.translate.x.toString()),e.setAttribute("y",t.translate.y.toString())),t.onClick&&e.addEventListener("click",t.onClick),e}function T(t){var e=document.createElementNS(D,"circle");return e.setAttribute("cx",t.radius.toString()),e.setAttribute("cy",t.radius.toString()),e.setAttribute("r",t.radius.toString()),t.id&&e.setAttribute("id",t.id),t.fill&&e.setAttribute("fill",t.fill),e}function B(t){var e=document.createElementNS(D,"rect");return e.setAttribute("width",t.width.toString()),e.setAttribute("height",t.height.toString()),t.borderRadius&&e.setAttribute("rx",t.borderRadius.toString()),t.fill&&e.setAttribute("fill",t.fill||"none"),t.stroke&&e.setAttribute("stroke",t.stroke),e}function F(t){var e=document.createElementNS(D,"path");return e.setAttribute("d",t.d),t.fill&&e.setAttribute("fill",t.fill),t.stroke&&e.setAttribute("stroke",t.stroke),t.strokeWidth&&e.setAttribute("stroke-width",t.strokeWidth.toString()),t.translate&&e.setAttribute("transform","translate("+t.translate.x+", "+t.translate.y+")"),e}function N(t){var e=document.createElementNS(D,"use");return e.setAttribute("href","#"+t),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+t),e}function L(){return document.createElementNS(D,"clipPath")}function U(t){var e=document.createElementNS(D,"defs");return t.forEach((function(t){return e.appendChild(t)})),e}function $(t){var e=document.createElementNS(D,"foreignObject");e.setAttribute("width",t.width.toString()),t.translate&&(e.setAttribute("x",t.translate.x.toString()),e.setAttribute("y",t.translate.y.toString()));var r=document.createElement("p");return r.textContent=t.content,e.appendChild(r),e}var z=10,H=5;function G(t,e){var r=B({width:0,height:0,borderRadius:t.style.label.borderRadius,stroke:t.style.label.strokeColor||e.style.color,fill:t.style.label.bgColor}),s=R({content:t.name,translate:{x:z,y:0},font:t.style.label.font,fill:t.style.label.color||e.style.color}),i=j({children:[r]});return new MutationObserver((function(){var t=s.getBBox(),e=t.height,i=t.width+2*z,o=e+2*H;r.setAttribute("width",i.toString()),r.setAttribute("height",o.toString()),s.setAttribute("y",(o/2).toString())})).observe(i,{attributes:!1,subtree:!1,childList:!0}),i.appendChild(s),i}var I=10,W=5;function X(t){var e=F({d:"",fill:t.style.bgColor,stroke:t.style.strokeColor}),r=R({content:t.name,fill:t.style.color,font:t.style.font,translate:{x:0,y:0}}),s=j({children:[e]}),i=t.style.pointerWidth;return new MutationObserver((function(){var s=r.getBBox(),o=s.height,n=s.width;if(0!==o&&0!==n){var a=t.style.borderRadius,h=i+n+2*I,c=o+2*W,l=["M 0,0","L "+i+","+c/2,"V "+c/2,"Q "+i+","+c/2+" "+(i+a)+","+c/2,"H "+(h-a),"Q "+h+","+c/2+" "+h+","+(c/2-a),"V -"+(c/2-a),"Q "+h+",-"+c/2+" "+(h-a)+",-"+c/2,"H "+(i+a),"Q "+i+",-"+c/2+" "+i+",-"+c/2,"V -"+c/2,"z"].join(" ");e.setAttribute("d",l.toString()),r.setAttribute("x",(i+I).toString())}})).observe(s,{attributes:!1,subtree:!1,childList:!0}),s.appendChild(r),s}var Y=10,V=10;function K(t){var e=F({d:"",fill:"#EEE"}),r=R({translate:{x:V+Y,y:0},content:t.hashAbbrev+" - "+t.subject,fill:"#333"}),s=2*t.style.dot.size,i=j({translate:{x:s,y:s/2},children:[e]});return new MutationObserver((function(){var t=r.getBBox().width,s=5,i=50,o=V+t+2*Y,n=["M 0,0","L "+V+","+V,"V "+(i/2-s),"Q "+V+","+i/2+" "+(V+s)+","+i/2,"H "+(o-s),"Q "+o+","+i/2+" "+o+","+(i/2-s),"V -"+(i/2-s),"Q "+o+",-"+i/2+" "+(o-s)+",-"+i/2,"H "+(V+s),"Q "+V+",-"+i/2+" "+V+",-"+(i/2-s),"V -"+V,"z"].join(" ");e.setAttribute("d",n.toString())})).observe(i,{attributes:!1,subtree:!1,childList:!0}),i.appendChild(r),i}function Q(t,e){var r,s,i={},o={},n=!1,a=0,h=null,c=P();p(Boolean(e&&e.responsive)),t.appendChild(c),e&&e.responsive&&t.setAttribute("style","display:inline-block; position: relative; width:100%; padding-bottom:100%; vertical-align:middle; overflow:hidden;");var l=new x(e);return l.subscribe((function(t){n=!0,m(t)})),l.getUserApi();function m(t){i={};var e=t.commits,o=t.branchesPaths;a=t.commitMessagesX,r=t,s=g(e),c.innerHTML="",c.appendChild(j({translate:{x:z,y:Y},children:[d(o),s]}))}function p(t){function e(){var t=Array.from(s.children),e=0,r=l.orientation===_.VerticalReverse?t:t.reverse();o=r.reduce((function(t,r){var s=parseInt(r.getAttribute("transform").split(",")[1].slice(0,-1),10),i=r.getElementsByTagName("foreignObject")[0],o=i&&i.firstElementChild;return t[s]=s+e,e+=q(o),t}),{})}function h(){if(!l.isHorizontal){var t=10;Object.keys(i).forEach((function(e){var r=i[e],s=r.branchLabel,o=r.tags,n=r.message,h=a;if(s){u(s,h);var c=s.getBBox().width+2*z;h+=c+t}o.forEach((function(e){u(e,h);var r=parseFloat(e.getAttribute("data-offset")||"0"),s=e.getBBox().width+2*I+r;h+=s+t})),n&&u(n,h)}))}}function p(t){var e=c.getBBox(),r=e.height,s=e.width,i=50,o=20,n=l.isHorizontal?i:z+Y,a=l.isHorizontal?i:H+Y+o;t?(c.setAttribute("preserveAspectRatio","xMinYMin meet"),c.setAttribute("viewBox","0 0 "+(s+n)+" "+(r+a))):(c.setAttribute("width",(s+n).toString()),c.setAttribute("height",(r+a).toString()))}new MutationObserver((function(){n?(n=!1,e(),m(r)):(h(),p(t))})).observe(c,{attributes:!1,subtree:!0,childList:!0})}function u(t,e){var r=t.getAttribute("transform")||"translate(0, 0)";t.setAttribute("transform",r.replace(/translate\(([\d\.]+),/,"translate("+e+","))}function d(t){var e=l.template.commit.dot.size,r=l.template.branch.mergeStyle===M.Bezier;return j({children:Array.from(t).map((function(t){var s=t[0],i=t[1];return F({d:E(i.map((function(t){return t.map(A)})),r,l.isVertical),fill:"none",stroke:s.computedColor||"",strokeWidth:s.style.lineWidth,translate:{x:e,y:e}})}))})}function g(t){return j({children:t.map(e)});function e(t){var e=A(t),s=e.x;return j({translate:{x:s,y:e.y},children:[w(t)].concat(r(t),[j({translate:{x:-s,y:0},children:[f(t)].concat(y(t),v(t))})])})}function r(e){if(!l.template.arrow.size)return[null];var r=e.style.dot.size;return e.parents.map((function(s){var i=t.find((function(t){return t.hash===s}));return i?j({translate:l.reverseArrow?{x:r+(i.x-e.x),y:r+(i.y-e.y)}:{x:r,y:r},children:[F({d:k(l,i,e),fill:l.template.arrow.color||""})]}):null}))}}function f(t){if(!t.style.message.display)return null;var e;if(t.renderMessage)return b(e=j({children:[]})),e.appendChild(t.renderMessage(t)),D(t,e),e;var r=R({content:t.message,fill:t.style.message.color||"",font:t.style.message.font,onClick:t.onMessageClick});if(e=j({translate:{x:0,y:t.style.dot.size},children:[r]}),t.body){var s=$({width:600,translate:{x:10,y:0},content:t.body});b(e),e.appendChild(s)}return D(t,e),e}function b(t){function e(t){if("foreignObject"===t.nodeName){var r=t.firstChild&&t.firstChild.parentElement;if(!r)return;r.setAttribute("height",q(r.firstElementChild).toString())}t.childNodes.forEach(e)}new MutationObserver((function(t){t.forEach((function(t){return e(t.target)}))})).observe(t,{attributes:!1,subtree:!1,childList:!0})}function y(t){return Array.from(l.branches.values()).map((function(e){if(!e.style.label.display)return null;if(!l.branchLabelOnEveryCommit){var r=l.refs.getCommit(e.name);if(t.hash!==r)return null}if(t.branchToDisplay!==e.name)return null;var s,i=e.renderLabel?e.renderLabel(e):G(e,t);if(l.isVertical)s=j({children:[i]});else{var o=2*t.style.dot.size,n=10;s=j({translate:{x:t.x,y:o+n},children:[i]})}return S(t,s),s}))}function v(t){return t.tags?l.isHorizontal?[]:t.tags.map((function(e){var r=e.render?e.render(e.name,e.style):X(e),s=j({translate:{x:0,y:t.style.dot.size},children:[r]});return s.setAttribute("data-offset",e.style.pointerWidth.toString()),B(t,s),s})):[]}function w(t){if(t.renderDot)return t.renderDot(t);var e=t.hash,r=T({id:e,radius:t.style.dot.size,fill:t.style.dot.color||""}),s="clip-"+t.hash,i=L();i.setAttribute("id",s),i.appendChild(N(e));var o=N(e);o.setAttribute("clip-path","url(#"+s+")"),o.setAttribute("stroke",t.style.dot.strokeColor||"");var n=t.style.dot.strokeWidth?2*t.style.dot.strokeWidth:0;o.setAttribute("stroke-width",n.toString());var a=t.dotText?R({content:t.dotText,font:t.style.dot.font,anchor:"middle",translate:{x:t.style.dot.size,y:t.style.dot.size}}):null;return j({onClick:t.onClick,onMouseOver:function(){O(t),t.onMouseOver()},onMouseOut:function(){h&&h.remove(),t.onMouseOut()},children:[U([r,i]),o,a]})}function O(t){if(c.firstChild&&(!l.isVertical||l.mode===C.Compact)&&(!l.isVertical||t.style.hasTooltipInCompactMode)){var e=t.renderTooltip?t.renderTooltip(t):K(t);h=j({translate:A(t),children:[e]}),c.firstChild.appendChild(h)}}function A(t){var e=t.x,r=t.y;return{x:e,y:o[r]||r}}function S(t,e){i[t.hashAbbrev]||W(t),i[t.hashAbbrev].branchLabel=e}function D(t,e){i[t.hashAbbrev]||W(t),i[t.hashAbbrev].message=e}function B(t,e){i[t.hashAbbrev]||W(t),i[t.hashAbbrev].tags.push(e)}function W(t){i[t.hashAbbrev]={branchLabel:null,tags:[],message:null}}}function q(t){var e=0;if(t){var r=t.getBoundingClientRect().height,s=window.getComputedStyle(t).marginTop||"0px";e=r+parseInt(s.replace("px",""),10)}return e}t.MergeStyle=M,t.Mode=C,t.Orientation=_,t.TemplateName=A,t.createGitgraph=Q,t.templateExtend=S,Object.defineProperty(t,"__esModule",{value:!0})}(s);var i,o,n,a,h,c,l,m={};r(m,"extract",(()=>i),(t=>i=t)),r(m,"parse",(()=>o),(t=>o=t)),r(m,"stringify",(()=>n),(t=>n=t)),r(m,"parseUrl",(()=>a),(t=>a=t)),r(m,"stringifyUrl",(()=>h),(t=>h=t)),r(m,"pick",(()=>c),(t=>c=t)),r(m,"exclude",(()=>l),(t=>l=t));var p;p=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`));var u,d=new RegExp("%[a-f0-9]{2}","gi"),g=new RegExp("(%[a-f0-9]{2})+","gi");function f(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var r=t.slice(0,e),s=t.slice(e);return Array.prototype.concat.call([],f(r),f(s))}function b(t){try{return decodeURIComponent(t)}catch(s){for(var e=t.match(d),r=1;r<e.length;r++)e=(t=f(e,r).join("")).match(d);return t}}u=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=g.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch(t){var s=b(r[0]);s!==r[0]&&(e[r[0]]=s)}r=g.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),o=0;o<i.length;o++){var n=i[o];t=t.replace(new RegExp(n,"g"),e[n])}return t}(t)}};var y;y=(t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const r=t.indexOf(e);return-1===r?[t]:[t.slice(0,r),t.slice(r+e.length)]};var v;v=function(t,e){for(var r={},s=Object.keys(t),i=Array.isArray(e),o=0;o<s.length;o++){var n=s[o],a=t[n];(i?-1!==e.indexOf(n):e(n,a,t))&&(r[n]=a)}return r};const w=Symbol("encodeFragmentIdentifier");function O(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function x(t,e){return e.encode?e.strict?p(t):encodeURIComponent(t):t}function C(t,e){return e.decode?u(t):t}function M(t){return Array.isArray(t)?t.sort():"object"==typeof t?M(Object.keys(t)).sort(((t,e)=>Number(t)-Number(e))).map((e=>t[e])):t}function A(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function S(t){const e=(t=A(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function _(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function E(t,e){O((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);const r=function(t){let e;switch(t.arrayFormat){case"index":return(t,r,s)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===s[t]&&(s[t]={}),s[t][e[1]]=r):s[t]=r};case"bracket":return(t,r,s)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==s[t]?s[t]=[].concat(s[t],r):s[t]=[r]:s[t]=r};case"colon-list-separator":return(t,r,s)=>{e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),e?void 0!==s[t]?s[t]=[].concat(s[t],r):s[t]=[r]:s[t]=r};case"comma":case"separator":return(e,r,s)=>{const i="string"==typeof r&&r.includes(t.arrayFormatSeparator),o="string"==typeof r&&!i&&C(r,t).includes(t.arrayFormatSeparator);r=o?C(r,t):r;const n=i||o?r.split(t.arrayFormatSeparator).map((e=>C(e,t))):null===r?r:C(r,t);s[e]=n};case"bracket-separator":return(e,r,s)=>{const i=/(\[\])$/.test(e);if(e=e.replace(/\[\]$/,""),!i)return void(s[e]=r?C(r,t):r);const o=null===r?[]:r.split(t.arrayFormatSeparator).map((e=>C(e,t)));void 0!==s[e]?s[e]=[].concat(s[e],o):s[e]=o};default:return(t,e,r)=>{void 0!==r[t]?r[t]=[].concat(r[t],e):r[t]=e}}}(e),s=Object.create(null);if("string"!=typeof t)return s;if(!(t=t.trim().replace(/^[?#&]/,"")))return s;for(const i of t.split("&")){if(""===i)continue;let[t,o]=y(e.decode?i.replace(/\+/g," "):i,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?o:C(o,e),r(C(t,e),o,s)}for(const t of Object.keys(s)){const r=s[t];if("object"==typeof r&&null!==r)for(const t of Object.keys(r))r[t]=_(r[t],e);else s[t]=_(r,e)}return!1===e.sort?s:(!0===e.sort?Object.keys(s).sort():Object.keys(s).sort(e.sort)).reduce(((t,e)=>{const r=s[e];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?t[e]=M(r):t[e]=r,t}),Object.create(null))}i=S,o=E,n=(t,e)=>{if(!t)return"";O((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);const r=function(t){switch(t.arrayFormat){case"index":return e=>(r,s)=>{const i=r.length;return void 0===s||t.skipNull&&null===s||t.skipEmptyString&&""===s?r:null===s?[...r,[x(e,t),"[",i,"]"].join("")]:[...r,[x(e,t),"[",x(i,t),"]=",x(s,t)].join("")]};case"bracket":return e=>(r,s)=>void 0===s||t.skipNull&&null===s||t.skipEmptyString&&""===s?r:null===s?[...r,[x(e,t),"[]"].join("")]:[...r,[x(e,t),"[]=",x(s,t)].join("")];case"colon-list-separator":return e=>(r,s)=>void 0===s||t.skipNull&&null===s||t.skipEmptyString&&""===s?r:null===s?[...r,[x(e,t),":list="].join("")]:[...r,[x(e,t),":list=",x(s,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e="bracket-separator"===t.arrayFormat?"[]=":"=";return r=>(s,i)=>void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?s:(i=null===i?"":i,0===s.length?[[x(r,t),e,x(i,t)].join("")]:[[s,x(i,t)].join(t.arrayFormatSeparator)])}default:return e=>(r,s)=>void 0===s||t.skipNull&&null===s||t.skipEmptyString&&""===s?r:null===s?[...r,x(e,t)]:[...r,[x(e,t),"=",x(s,t)].join("")]}}(e),s={};for(const r of Object.keys(t))i=r,e.skipNull&&null==t[i]||e.skipEmptyString&&""===t[i]||(s[r]=t[r]);var i;const o=Object.keys(s);return!1!==e.sort&&o.sort(e.sort),o.map((s=>{const i=t[s];return void 0===i?"":null===i?x(s,e):Array.isArray(i)?0===i.length&&"bracket-separator"===e.arrayFormat?x(s,e)+"[]":i.reduce(r(s),[]).join("&"):x(s,e)+"="+x(i,e)})).filter((t=>t.length>0)).join("&")},a=(t,e)=>{e=Object.assign({decode:!0},e);const[r,s]=y(t,"#");return Object.assign({url:r.split("?")[0]||"",query:E(S(t),e)},e&&e.parseFragmentIdentifier&&s?{fragmentIdentifier:C(s,e)}:{})},h=(t,e)=>{e=Object.assign({encode:!0,strict:!0,[w]:!0},e);const r=A(t.url).split("?")[0]||"",s=i(t.url),a=o(s,{sort:!1}),h=Object.assign(a,t.query);let c=n(h,e);c&&(c=`?${c}`);let l=function(t){let e="";const r=t.indexOf("#");return-1!==r&&(e=t.slice(r)),e}(t.url);return t.fragmentIdentifier&&(l=`#${e[w]?x(t.fragmentIdentifier,e):t.fragmentIdentifier}`),`${r}${c}${l}`},c=(t,e,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[w]:!1},r);const{url:s,query:i,fragmentIdentifier:o}=a(t,r);return h({url:s,query:v(i,e),fragmentIdentifier:o},r)},l=(t,e,r)=>{const s=Array.isArray(e)?t=>!e.includes(t):(t,r)=>!e(t,r);return c(t,s,r)};const k=t=>Math.max(t.offsetHeight,t.scrollHeight);const D=document.getElementById("graph-container");let P=0;const j=(0,s.templateExtend)(s.TemplateName.Metro,{colors:["#929292","#255db7","#f3a138","#bd461d","#419bb2","#ef754a","#f6bb3f","#53c1dd"],commit:{hasTooltipInCompactMode:!1,message:{displayAuthor:!1},dot:{font:"12px Arial"}}});const R=function(){const e=t(m).parse(location.search);return{showCommitNumber:"commit_number"in e,scrollable:"scrollable"in e,branchesOrder:"branches_order"in e?e.branches_order?.split(","):void 0,mode:e.mode,orientation:e.orientation}}();R.scrollable&&new class{constructor(t={}){const e={content:t.viewport.children[0],direction:"all",pointerMode:"all",scrollMode:void 0,bounce:!0,bounceForce:.1,friction:.05,textSelection:!1,inputsFocus:!0,emulateScroll:!1,preventDefaultOnEmulateScroll:!1,preventPointerMoveDefault:!0,lockScrollOnDragDirection:!1,pointerDownPreventDefault:!0,dragDirectionTolerance:40,onPointerDown(){},onPointerUp(){},onPointerMove(){},onClick(){},onUpdate(){},onWheel(){},shouldScroll:()=>!0};if(this.props={...e,...t},!(this.props.viewport&&this.props.viewport instanceof Element))return void console.error('ScrollBooster init error: "viewport" config property must be present and must be Element');if(!this.props.content)return void console.error("ScrollBooster init error: Viewport does not have any content");this.isDragging=!1,this.isTargetScroll=!1,this.isScrolling=!1,this.isRunning=!1;const r={x:0,y:0};this.position={...r},this.velocity={...r},this.dragStartPosition={...r},this.dragOffset={...r},this.clientOffset={...r},this.dragPosition={...r},this.targetPosition={...r},this.scrollOffset={...r},this.rafID=null,this.events={},this.updateMetrics(),this.handleEvents()}updateOptions(t={}){this.props={...this.props,...t},this.props.onUpdate(this.getState()),this.startAnimationLoop()}updateMetrics(){var t;this.viewport={width:this.props.viewport.clientWidth,height:this.props.viewport.clientHeight},this.content={width:(t=this.props.content,Math.max(t.offsetWidth,t.scrollWidth)),height:k(this.props.content)},this.edgeX={from:Math.min(-this.content.width+this.viewport.width,0),to:0},this.edgeY={from:Math.min(-this.content.height+this.viewport.height,0),to:0},this.props.onUpdate(this.getState()),this.startAnimationLoop()}startAnimationLoop(){this.isRunning=!0,cancelAnimationFrame(this.rafID),this.rafID=requestAnimationFrame((()=>this.animate()))}animate(){if(!this.isRunning)return;this.updateScrollPosition(),this.isMoving()||(this.isRunning=!1,this.isTargetScroll=!1);const t=this.getState();this.setContentPosition(t),this.props.onUpdate(t),this.rafID=requestAnimationFrame((()=>this.animate()))}updateScrollPosition(){this.applyEdgeForce(),this.applyDragForce(),this.applyScrollForce(),this.applyTargetForce();const t=1-this.props.friction;this.velocity.x*=t,this.velocity.y*=t,"vertical"!==this.props.direction&&(this.position.x+=this.velocity.x),"horizontal"!==this.props.direction&&(this.position.y+=this.velocity.y),this.props.bounce&&!this.isScrolling||this.isTargetScroll||(this.position.x=Math.max(Math.min(this.position.x,this.edgeX.to),this.edgeX.from),this.position.y=Math.max(Math.min(this.position.y,this.edgeY.to),this.edgeY.from))}applyForce(t){this.velocity.x+=t.x,this.velocity.y+=t.y}applyEdgeForce(){if(!this.props.bounce||this.isDragging)return;const t=this.position.x<this.edgeX.from,e=this.position.x>this.edgeX.to,r=this.position.y<this.edgeY.from,s=this.position.y>this.edgeY.to,i=t||e,o=r||s;if(!i&&!o)return;const n=t?this.edgeX.from:this.edgeX.to,a=r?this.edgeY.from:this.edgeY.to,h=n-this.position.x,c=a-this.position.y,l={x:h*this.props.bounceForce,y:c*this.props.bounceForce},m=this.position.x+(this.velocity.x+l.x)/this.props.friction,p=this.position.y+(this.velocity.y+l.y)/this.props.friction;(t&&m>=this.edgeX.from||e&&m<=this.edgeX.to)&&(l.x=h*this.props.bounceForce-this.velocity.x),(r&&p>=this.edgeY.from||s&&p<=this.edgeY.to)&&(l.y=c*this.props.bounceForce-this.velocity.y),this.applyForce({x:i?l.x:0,y:o?l.y:0})}applyDragForce(){if(!this.isDragging)return;const t=this.dragPosition.x-this.position.x,e=this.dragPosition.y-this.position.y;this.applyForce({x:t-this.velocity.x,y:e-this.velocity.y})}applyScrollForce(){this.isScrolling&&(this.applyForce({x:this.scrollOffset.x-this.velocity.x,y:this.scrollOffset.y-this.velocity.y}),this.scrollOffset.x=0,this.scrollOffset.y=0)}applyTargetForce(){this.isTargetScroll&&this.applyForce({x:.08*(this.targetPosition.x-this.position.x)-this.velocity.x,y:.08*(this.targetPosition.y-this.position.y)-this.velocity.y})}isMoving(){return this.isDragging||this.isScrolling||Math.abs(this.velocity.x)>=.01||Math.abs(this.velocity.y)>=.01}scrollTo(t={}){this.isTargetScroll=!0,this.targetPosition.x=-t.x||0,this.targetPosition.y=-t.y||0,this.startAnimationLoop()}setPosition(t={}){this.velocity.x=0,this.velocity.y=0,this.position.x=-t.x||0,this.position.y=-t.y||0,this.startAnimationLoop()}getState(){return{isMoving:this.isMoving(),isDragging:!(!this.dragOffset.x&&!this.dragOffset.y),position:{x:-this.position.x,y:-this.position.y},dragOffset:this.dragOffset,dragAngle:this.getDragAngle(this.clientOffset.x,this.clientOffset.y),borderCollision:{left:this.position.x>=this.edgeX.to,right:this.position.x<=this.edgeX.from,top:this.position.y>=this.edgeY.to,bottom:this.position.y<=this.edgeY.from}}}getDragAngle(t,e){return Math.round(Math.atan2(t,e)*(180/Math.PI))}getDragDirection(t,e){return Math.abs(90-Math.abs(t))<=90-e?"horizontal":"vertical"}setContentPosition(t){"transform"===this.props.scrollMode&&(this.props.content.style.transform=`translate(${-t.position.x}px, ${-t.position.y}px)`),"native"===this.props.scrollMode&&(this.props.viewport.scrollTop=t.position.y,this.props.viewport.scrollLeft=t.position.x)}handleEvents(){const t={x:0,y:0},e={x:0,y:0};let r=null,s=null,i=!1;const o=s=>{if(!this.isDragging)return;const o=i?s.touches[0]:s,{pageX:n,pageY:a,clientX:h,clientY:c}=o;this.dragOffset.x=n-t.x,this.dragOffset.y=a-t.y,this.clientOffset.x=h-e.x,this.clientOffset.y=c-e.y,(Math.abs(this.clientOffset.x)>5&&!r||Math.abs(this.clientOffset.y)>5&&!r)&&(r=this.getDragDirection(this.getDragAngle(this.clientOffset.x,this.clientOffset.y),this.props.dragDirectionTolerance)),this.props.lockScrollOnDragDirection&&"all"!==this.props.lockScrollOnDragDirection?r===this.props.lockScrollOnDragDirection&&i?(this.dragPosition.x=this.dragStartPosition.x+this.dragOffset.x,this.dragPosition.y=this.dragStartPosition.y+this.dragOffset.y):i?(this.dragPosition.x=this.dragStartPosition.x,this.dragPosition.y=this.dragStartPosition.y):(this.dragPosition.x=this.dragStartPosition.x+this.dragOffset.x,this.dragPosition.y=this.dragStartPosition.y+this.dragOffset.y):(this.dragPosition.x=this.dragStartPosition.x+this.dragOffset.x,this.dragPosition.y=this.dragStartPosition.y+this.dragOffset.y)};this.events.pointerdown=r=>{i=!(!r.touches||!r.touches[0]),this.props.onPointerDown(this.getState(),r,i);const s=i?r.touches[0]:r,{pageX:n,pageY:a,clientX:h,clientY:c}=s,{viewport:l}=this.props,m=l.getBoundingClientRect();if(h-m.left>=l.clientLeft+l.clientWidth)return;if(c-m.top>=l.clientTop+l.clientHeight)return;if(!this.props.shouldScroll(this.getState(),r))return;if(2===r.button)return;if("mouse"===this.props.pointerMode&&i)return;if("touch"===this.props.pointerMode&&!i)return;if(!(this.props.inputsFocus&&["input","textarea","button","select","label"].indexOf(r.target.nodeName.toLowerCase())>-1)){if(this.props.textSelection){const t=((t,e,r)=>{const s=t.childNodes,i=document.createRange();for(let t=0;t<s.length;t++){const o=s[t];if(3!==o.nodeType)continue;i.selectNodeContents(o);const n=i.getBoundingClientRect();if(e>=n.left&&r>=n.top&&e<=n.right&&r<=n.bottom)return o}return!1})(r.target,h,c);if(t)return;(()=>{const t=window.getSelection?window.getSelection():document.selection;t&&(t.removeAllRanges?t.removeAllRanges():t.empty&&t.empty())})()}this.isDragging=!0,t.x=n,t.y=a,e.x=h,e.y=c,this.dragStartPosition.x=this.position.x,this.dragStartPosition.y=this.position.y,o(r),this.startAnimationLoop(),!i&&this.props.pointerDownPreventDefault&&r.preventDefault()}},this.events.pointermove=t=>{!t.cancelable||"all"!==this.props.lockScrollOnDragDirection&&this.props.lockScrollOnDragDirection!==r||t.preventDefault(),o(t),this.props.onPointerMove(this.getState(),t,i)},this.events.pointerup=t=>{this.isDragging=!1,r=null,this.props.onPointerUp(this.getState(),t,i)},this.events.wheel=t=>{const e=this.getState();this.props.emulateScroll&&(this.velocity.x=0,this.velocity.y=0,this.isScrolling=!0,this.scrollOffset.x=-t.deltaX,this.scrollOffset.y=-t.deltaY,this.props.onWheel(e,t),this.startAnimationLoop(),clearTimeout(s),s=setTimeout((()=>this.isScrolling=!1),80),this.props.preventDefaultOnEmulateScroll&&this.getDragDirection(this.getDragAngle(-t.deltaX,-t.deltaY),this.props.dragDirectionTolerance)===this.props.preventDefaultOnEmulateScroll&&t.preventDefault())},this.events.scroll=()=>{const{scrollLeft:t,scrollTop:e}=this.props.viewport;Math.abs(this.position.x+t)>3&&(this.position.x=-t,this.velocity.x=0),Math.abs(this.position.y+e)>3&&(this.position.y=-e,this.velocity.y=0)},this.events.click=t=>{const e=this.getState(),r="vertical"!==this.props.direction?e.dragOffset.x:0,s="horizontal"!==this.props.direction?e.dragOffset.y:0;Math.max(Math.abs(r),Math.abs(s))>5&&(t.preventDefault(),t.stopPropagation()),this.props.onClick(e,t,i)},this.events.contentLoad=()=>this.updateMetrics(),this.events.resize=()=>this.updateMetrics(),this.props.viewport.addEventListener("mousedown",this.events.pointerdown),this.props.viewport.addEventListener("touchstart",this.events.pointerdown,{passive:!1}),this.props.viewport.addEventListener("click",this.events.click),this.props.viewport.addEventListener("wheel",this.events.wheel,{passive:!1}),this.props.viewport.addEventListener("scroll",this.events.scroll),this.props.content.addEventListener("load",this.events.contentLoad,!0),window.addEventListener("mousemove",this.events.pointermove),window.addEventListener("touchmove",this.events.pointermove,{passive:!1}),window.addEventListener("mouseup",this.events.pointerup),window.addEventListener("touchend",this.events.pointerup),window.addEventListener("resize",this.events.resize)}destroy(){this.props.viewport.removeEventListener("mousedown",this.events.pointerdown),this.props.viewport.removeEventListener("touchstart",this.events.pointerdown),this.props.viewport.removeEventListener("click",this.events.click),this.props.viewport.removeEventListener("wheel",this.events.wheel),this.props.viewport.removeEventListener("scroll",this.events.scroll),this.props.content.removeEventListener("load",this.events.contentLoad),window.removeEventListener("mousemove",this.events.pointermove),window.removeEventListener("touchmove",this.events.pointermove),window.removeEventListener("mouseup",this.events.pointerup),window.removeEventListener("touchend",this.events.pointerup),window.removeEventListener("resize",this.events.resize)}}({viewport:document.body,scrollMode:"transform"});const T=(0,s.createGitgraph)(D,{mode:R.mode,compareBranchesOrder:R.branchesOrder?function(t,e){return R.branchesOrder.indexOf(t)-R.branchesOrder.indexOf(e)}:void 0,orientation:R.orientation,template:j});window.aa=T;const B=new Map;let F;atob(location.hash.substring(1)).split("\n").map((t=>t.trim())).filter((t=>t.length>0&&"#"!==t[0])).forEach((t=>{const[e,...r]=t.split(" ");switch(e){case"checkout":(i=r).forEach(((t,e)=>{B.has(t)||B.set(t,T.branch({name:t,from:F})),e==i.length-1&&(F=B.get(t))}));break;case"commit":!function(t){F&&F.commit({subject:t.join(" "),dotText:R.showCommitNumber?"C"+P++:void 0})}(r);break;case"merge":s=r[0],B.has(s)&&F?.merge(B.get(s));break;case"set_commit_num":P=parseInt(r[0]);break;default:console.warn(`Unknown command: ${e}`)}var s,i}));
//# sourceMappingURL=index.f3bb8575.js.map
